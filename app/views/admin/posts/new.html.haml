%h3 Add New Post
= form_for [:admin, @post], html: {class: 'admin-post-form'} do |f|
  .column-left
    .post-body
      .panel
        .form-group
          = f.label :title
          = f.text_field :title, class: 'form-control'
        .form-group
          = f.label :post_type_id, 'Post Type'
          = f.collection_select :post_type_id, @post_types, :id, :name, {}, {class: 'form-control'}
        .form-group
          = f.label :content, 'Markup'
          = f.text_area :content, class: 'form-control', rows: '20'
        .form-group
          / TODO: handle media insertion and upload
          %label Photo
          %input.form-control(type="file")
  .column-right
    .panel
      %p
        %strong Publish
      %hr
      %p
        %i.glyphicon.glyphicon-flag
        Status:
        %strong
          = @post.publish_status_name
      .form-group
        %i.glyphicon.glyphicon-calendar
        = f.label :published_at, 'Published:'
        %br
        = f.datetime_select :published_at, prompt: { day: 'Day', month: 'Month', year: 'Year' }
      .form-group
        = f.hidden_field :publish_status
        = f.submit 'Save Draft', class: 'btn btn-default'
        = f.submit 'Publish', class: 'btn btn-primary pull-right'
    .panel
      %p
        %strong Categories
      %hr
      .form-group#categories-list
        = f.collection_check_boxes(:category_ids, @categories, :id, :name) do |b|
          = b.label(class: 'checkbox') { b.check_box(class: 'checkbox') + b.text }
        %a#add-new-category-dropdown
          %i.glyphicon.glyphicon-plus
          Add New Category
        .form-group#add-new-category-container
          = text_field_tag :new_category, nil, { class: 'form-control' }
          = link_to 'Add New Category', admin_categories_path, class: 'btn btn-default', id: 'add-new-category-submit'
    .panel#tags-selection
      %p
        %strong Tags
      %hr
      .form-group
        = text_field_tag 'post[tags]', nil, class: 'form-control'
      %p
        %em Separate tags with commas
